@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global styles for Maximus Engagimus */
:root {
  --bg: #ffffff;
  --text: #1f2937;
  --muted: #6b7280;
}

/* Dark theme variables - toggled with the `dark` class on the documentElement */
.dark {
  /* Match the login/card color for full-screen dark mode */
  --bg: #0b0b0d; /* near-black */
  --card: #111216; /* card surface - slightly lighter than page */
  --card-soft: #0f1112; /* subtle surface for inputs/list items */
  --text: #ffffff; /* pure white for maximum contrast */
  --muted: #9aa6b2; /* slightly brighter muted text in dark mode */
} 

html, body, #root {
  height: 100%;
  margin: 0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a { color: inherit; }

/* Utility */
.container { max-width: 1100px; margin: 0 auto; padding: 1rem; }

/* Spinner fallback for environments where Tailwind utilities aren't loaded */
@keyframes spin { to { transform: rotate(360deg); } }
.spinner-fallback { animation: spin 1s linear infinite; }

/* Guaranteed CSS spinner used as a fallback (no utility classes required) */
.plain-spinner {
  width: 48px;
  height: 48px;
  border: 6px solid #E9ECEF; /* gray-200 */
  border-top-color: #3B4CCA; /* primary-500 */
  border-radius: 9999px;
  animation: spin 1s linear infinite;
}

/* Button utilities */
.btn-base {
  @apply inline-flex items-center justify-center font-medium rounded-md shadow-sm transform-gpu
         focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2
         disabled:opacity-50 disabled:cursor-not-allowed motion-safe:transition-transform motion-safe:transition-shadow duration-150;
}

.btn-primary {
  @apply btn-base bg-primary-500 text-white hover:bg-primary-600 active:scale-95 active:shadow-sm focus-visible:ring-primary-500
         hover:shadow-md motion-safe:hover:-translate-y-1;
}

.btn-ghost {
  @apply btn-base bg-transparent text-primary-600 hover:bg-primary-50 hover:text-primary-700 border border-transparent hover:border-primary-200;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .btn-base { transition: none; }
  .btn-primary { transform: none; }
}


/* Form controls */
.form-label {
  @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1;
}

/* Dark-mode adjustments for primary text colors (links/small text) */
/* Make primary text lighter in dark mode so it meets contrast requirements against near-black backgrounds */
.dark .text-primary-500{ color: #7ea0ff; }
.dark .text-primary-600{ color: #94b2ff; }
.dark .text-primary-700{ color: #b6d0ff; }
.dark .text-primary-900{ color: #9bb4ff; }
.dark .hover\:text-primary-600:hover{ color: #94b2ff; }

/* Dark mode: ensure commonly-used gray text utilities meet contrast by mapping them to our tokens */
.dark .text-gray-200{ color: var(--text) !important; }
.dark .text-gray-300{ color: var(--text) !important; }
.dark .text-gray-400{ color: var(--muted) !important; }
.dark .text-gray-500{ color: var(--muted) !important; }
.dark .text-gray-600{ color: var(--muted) !important; }
.dark .text-gray-700{ color: var(--text) !important; }
.dark .text-gray-900{ color: var(--text) !important; }

/* Component overrides to align with tokens */
.dark .form-label { color: var(--muted); }
.dark .input-base { color: var(--text); }

/* Ensure bold / important text uses the high-contrast token */
.dark .font-medium, .dark .font-semibold, .dark .font-bold { color: var(--text) !important; }

/* Quick action cards: remove gradient in dark and match the dashboard card surface */
.dark .quick-card {
  /* remove any background image (gradient) and use our card token */
  background-image: none !important;
  background-color: var(--card) !important;
  border-color: rgb(73, 80, 87) !important;
  border: 1px solid rgb(73, 80, 87) !important;
}

/* Ensure quick-card title and subtitle are readable in dark */
.dark .quick-card .font-semibold { color: var(--text) !important; }
.dark .quick-card p.text-sm { color: var(--muted) !important; }

/* Stronger fallback selectors that match variations in generated classes */
.dark [class*="quick-card"] {
  background-image: none !important;
  /* Use the card surface in dark mode so quick-cards match the stat boxes */
  background-color: var(--card) !important;
  background-blend-mode: normal !important;
  border-color: rgb(73, 80, 87) !important;
  border: 1px solid rgb(73, 80, 87) !important;
}
.dark [class*="quick-card"] h3,
.dark [class*="quick-card"] .font-semibold { color: var(--text) !important; }
.dark [class*="quick-card"] p,
.dark [class*="quick-card"] .text-sm { color: var(--muted) !important; }

.input-base {
  @apply block w-full px-3 py-2 border border-gray-200 rounded-md bg-white text-gray-900 placeholder-gray-400
         focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/70 focus-visible:ring-offset-2 focus-visible:ring-offset-white
         transition-colors duration-150;
  @apply dark:bg-[var(--card-soft)] dark:text-gray-200 dark:border-gray-700 dark:placeholder-gray-400 dark:focus-visible:ring-offset-gray-900;
}

.input-base:disabled {
  @apply bg-gray-50 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400;
}


